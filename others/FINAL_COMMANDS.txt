# ==========================================
# FINAL VERIFIED COMMANDS TO RUN
# Complete Multi-Modal Transport System
# ==========================================

## QUICK START (RECOMMENDED)
## ==========================

# One-command complete setup and run:
.\SETUP_AND_RUN.ps1

# This will automatically:
# - Create all database tables
# - Import train data (300 trains)
# - Import flight data (200 flights)
# - Start Flask server
# - Start FastAPI server
# - Open browser to trains.html


## MANUAL SETUP (Alternative)
## ===========================

### Step 1: Database Setup
python backend/setup_ksrtc_database.py
python backend/setup_trains_flights.py

### Step 2: Data Import
python backend/populate_ksrtc_quick.py      # KSRTC sample data
python backend/import_train_data.py         # 300 trains (10 min)
python backend/import_flight_data.py        # 200 flights (2 min)

### Step 3: Start Servers

# Terminal 1 - Flask Backend
python backend/app.py

# Terminal 2 - FastAPI Routing
cd backend
uvicorn main:app --reload --port 8000

### Step 4: Access Application
# Open browser: http://localhost:5000/trains.html


## VERIFICATION
## ============

# Run system verification:
.\VERIFY_SYSTEM.ps1

# This checks:
# - Database connectivity
# - Data import status
# - Server status (ports 5000, 8000)
# - File structure
# - API endpoints


## TEST CREDENTIALS
## ================

Username: testuser
Password: password123


## APPLICATION URLS
## ================

# Main Pages
http://localhost:5000/login.html          # Login
http://localhost:5000/register.html       # Register
http://localhost:5000/index.html          # Map & Routes

# Booking Pages
http://localhost:5000/ksrtc.html          # Bus Booking
http://localhost:5000/trains.html         # Train Booking (NEW)
http://localhost:5000/flights.html        # Flight Booking (NEW)

# Tickets
http://localhost:5000/mobile_tickets.html # All Tickets


## SAMPLE TEST FLOWS
## ==================

### Train Booking Test:
1. Open http://localhost:5000/trains.html
2. Login with testuser/password123
3. From: NAGPUR - NGP
4. To: PUNE JN - PUNE
5. Date: Tomorrow's date
6. Class: SLEEPER
7. Search â†’ Select train â†’ Choose coach â†’ Select berths â†’ Book

### Flight Booking Test:
1. Open http://localhost:5000/flights.html
2. Login with same credentials
3. From: Delhi - DEL
4. To: Hyderabad - HYD
5. Date: Tomorrow's date
6. Class: Economy
7. Search â†’ Select flight â†’ Choose seat â†’ Book


## DATABASE QUERIES (Optional Testing)
## ===================================

# Check train data:
mysql -u root transport_system -e "SELECT COUNT(*) as trains FROM trains;"
mysql -u root transport_system -e "SELECT COUNT(*) as stations FROM train_stations;"
mysql -u root transport_system -e "SELECT COUNT(*) as berths FROM train_berths;"

# Check flight data:
mysql -u root transport_system -e "SELECT COUNT(*) as flights FROM flights;"
mysql -u root transport_system -e "SELECT COUNT(*) as airports FROM airports;"
mysql -u root transport_system -e "SELECT COUNT(*) as seats FROM flight_seats;"

# Check KSRTC data:
mysql -u root transport_system -e "SELECT COUNT(*) as routes FROM ksrtc_routes;"
mysql -u root transport_system -e "SELECT COUNT(*) as buses FROM ksrtc_buses;"


## API TESTING (Optional)
## ======================

# Test train stations API:
Invoke-RestMethod -Uri "http://localhost:5000/api/trains/stations"

# Test flight airports API:
Invoke-RestMethod -Uri "http://localhost:5000/api/flights/airports"

# Test KSRTC stops API:
Invoke-RestMethod -Uri "http://localhost:5000/api/ksrtc/stops"


## TROUBLESHOOTING
## ===============

### Issue: "No module named 'flask'"
Solution: pip install flask flask-cors bcrypt pyjwt python-dotenv mysql-connector-python

### Issue: "Can't connect to MySQL"
Solution: 
1. Check MySQL is running: mysql -u root -p
2. Create database: CREATE DATABASE transport_system;
3. Update .env file with correct credentials

### Issue: "Port 5000 already in use"
Solution: 
1. Find process: netstat -ano | findstr :5000
2. Kill process: taskkill /PID <PID> /F
3. Or change port in app.py

### Issue: "No trains/flights found"
Solution: Re-run import scripts:
python backend/import_train_data.py
python backend/import_flight_data.py

### Issue: "Token missing" error
Solution: Login again (token expires after 24 hours)


## EXPECTED RESULTS
## ================

After successful setup:
- 500+ train stations imported
- 300 trains with schedules
- 400,000+ train berths
- 50+ airports imported
- 200 flights with schedules
- 34,000+ flight seats
- 19 KSRTC bus stops
- 10 KSRTC routes
- 400+ bus seats

Flask server shows:
  * Running on http://0.0.0.0:5000
  * Available endpoints listed

FastAPI server shows:
  INFO: Uvicorn running on http://127.0.0.1:8000
  Docs at: http://127.0.0.1:8000/docs


## SUCCESS INDICATORS
## ===================

âœ“ Both servers running without errors
âœ“ Login page loads (http://localhost:5000/login.html)
âœ“ Can login with testuser/password123
âœ“ Train search shows dropdown with 500+ stations
âœ“ Flight search shows dropdown with 50+ airports
âœ“ KSRTC search shows dropdown with 19 stops
âœ“ Seat maps display correctly
âœ“ Booking creates PNR/booking reference
âœ“ QR code generates on ticket
âœ“ Tickets appear in mobile_tickets.html


## FINAL VERIFICATION CHECKLIST
## =============================

[ ] MySQL database 'transport_system' created
[ ] All 27+ tables created successfully
[ ] Train data imported (300 trains)
[ ] Flight data imported (200 flights)
[ ] KSRTC data populated (10 routes)
[ ] Flask server running on port 5000
[ ] FastAPI server running on port 8000
[ ] Can access login page
[ ] Can login with test credentials
[ ] Train booking flow works end-to-end
[ ] Flight booking flow works end-to-end
[ ] KSRTC booking flow works
[ ] QR codes generate correctly
[ ] Tickets visible in mobile_tickets.html
[ ] Expense tracking works


## READY TO USE!
## =============

Your complete multi-modal transport system is ready!

Book buses, trains, and flights with:
- Real-time seat availability
- Visual seat selection
- QR code tickets
- Expense tracking
- Mobile-friendly UI

Enjoy! ðŸš€
